- hosts: localhost
  connection: local
  become: true

  tasks:
  - name: Install chezmoi
    package:
      name:
        - chezmoi
      state: present
      update_cache: true
  
      #- name: Ensure chezmoi directory exists
      #file:
      #dest: /home/artix/.config/chezmoi
      #owner: artix
      #group: artix
      #state: directory
      #mode: 0755
  
  - name: Configure chezmoi
    lineinfile:
      path: /home/artix/.config/chezmoi/chezmoi.yaml
      line: 'sourceDir: ~/dotfiles/chezmoi'
      create: yes
      owner: artix
      group: artix
      mode: 0644
  
  - name: Apply configuration files
    shell: chezmoi apply 
